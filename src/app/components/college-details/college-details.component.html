<div class="container m-4" *ngIf="collegeDetails && tests && onlineTest">
    <div class="row">
        <!-- <div class="col-md-12">
            <mat-card class="p-0">
                <img  src="https://img.freepik.com/free-vector/abstract-technology-particle-background_52683-25766.jpg?size=626&ext=jpg" style="width: 100%; height: 300px;">
                <div class="row">

                    <div class="col-md-8">
                        <div class="m-4">
                           <h2 style="font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;" class="mt-3">{{ collegeDetails.collegeName | uppercase }}</h2>
                           <h5 class="mt-3">{{ collegeDetails.email }}</h5>
                           <div style="overflow: hidden;" class="mt-3">
                            <h6 style="float: left;">{{collegeDetails.collegeName }}</h6>
                            <h6 style="float: left;" class="ml-2 mr-2 "> . </h6> 
                            <h6 style="float: left;" class="font-weight-bold text-primary">{{ collegeDetails.students.length }} Students</h6>
                            <h6 style="float: left;" class="ml-2 mr-2 "> . </h6> 
                            <h6 style="float: left;" (click)="View()" class="text-primary"> View Info </h6>
                           </div>

                        </div>
                       
                    </div>
            
                    <div class="col-md-4">
                        <div class="m-4">
                            <mat-card  mat-card-avatar class="mr-4 mat-elevation-z6" style="width: 70%; height: 150px;">
                                <img mat-card-avatar src="https://i.ytimg.com/vi/HK7YSiiGrZI/maxresdefault.jpg" style="width: 100%; height: 125px;">
                            </mat-card>
                            
                        </div>
                        
                    </div>
                </div>
            </mat-card>
        
        </div> -->

        <!-- <div class="row"> -->
            <div class="col-md-12">
                <mat-card>
                <div class="fb-profile-block">
                    <div class="fb-profile-block-thumb cover-container"></div>
                    <div class="profile-img">
                        <a href="#">
                            <img  [src]="collegeDetails.imageUrl">        
                        </a>
                    </div>
                    <div class="profile-name">
                        <h2>{{ collegeDetails.collegeName | uppercase }}</h2>
                    </div>
                    
                    <div class="fb-profile-block-menu">
                        <div class="block-menu">
                            <ul>
                                <li>
                                    <button mat-button (click)="openFav()">Favourite Questions</button>
                                    
                                </li>
                                <li>
                                    <button mat-button>Topics List</button>
                                    
                                </li>
                                <li>
                                    <button mat-button>Customized Test</button>
                                    
                                </li>
                                <li>
                                    <button mat-button (click)="editProfile()"><mat-icon>edit</mat-icon>Edit</button>
                                    
                                </li>
                            </ul>
                        </div>
                        <div class="block-menu">
                            <ul>
                                <li><a href="#">Timeline</a></li>
                                <li><a href="#">about</a></li>
                                <li><a href="#">Friends</a></li>
                                <li><a href="#">Photos</a></li>
                                <li><a href="#">More...</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </mat-card>
            </div>
        <!-- </div> -->
    

        
            <div class="col-md-12 mt-5">
               <mat-card>
                    <div class="row">
                        <div class="col-md-6">
                            <p>{{ collegeDetails.collegeName }}'s Details</p>
                        </div>
                    </div>
                <div class="border rounded" style="border-width:3px !important; border-style:solid; border-color: black;">
                       <div class="row">
                            <div class="col-md-4 border-right" style="border-width:3px !important">
                                
                                    <h5 class="m-4"><mat-icon>mail_outline</mat-icon> Email</h5>
                                    <div class="m-4">
                                    <p>{{ collegeDetails?.email }}</p>
                                </div>
                            </div>
                            <div class="col-md-4 border-right" style="border-width:3px !important">
                                <h5 class="m-4"><mat-icon>perm_phone_msg</mat-icon>Phone Number</h5>
                                <p class="m-4">{{ collegeDetails?.phoneNumber }}</p>
                            </div>
                            <div class="col-md-4">
                                <h5 class="m-4"><mat-icon>person_pin_circle</mat-icon>Coordinator Name</h5>
                                <p class="m-4">{{ collegeDetails?.placementCordinatorName}}</p>
                            </div>
                       </div>
                       
                   </div>
               </mat-card>
               
            </div>
        
        </div>

        <mat-card class="mt-5 mat-elevation-z3">
            <div class="row">
                <div class="col-md-6">
                    <p>{{ collegeDetails.collegeName }}'s Dashboards</p>
                </div>
            </div>
            <div class="border rounded" style="border-width:3px !important; border-style:solid; border-color: black;">
                <div class="row  m-4">
                    <div class="col-md-3 border-right" style="border-width:3px !important">
                        <h2 class="text-center">{{ collegeDetails.students.length }}</h2>
                        <h6 class="text-center">STUDENTS</h6>
                    </div>
                    <div class="col-md-3 border-right" style="border-width:3px !important">
                        <h2 class="text-center">{{ tests.length }}</h2>
                        <h6 class="text-center">TOTAL TESTS</h6>
                    </div>
                    <div class="col-md-3 border-right" style="border-width:3px !important">
                        <h2 class="text-center">{{ tests.length - onlineTest.length }}</h2>
                        <h6 class="text-center">OFFLINE TESTS</h6>
                    </div>
                    <div class="col-md-3">
                        <h2 class="text-center">{{ onlineTest.length }}</h2>
                        <h6 class="text-center">ONGOING TESTS</h6>
                    </div>
                </div>
            </div>
            
        </mat-card>
               

        <mat-card class="mt-5 mat-elevation-z3">

            <div class="row">
                <div class="col-md-6">
                    <p>OFFLINE TESTS</p>
                </div>
            </div>

            <div class="border rounded" style="border-width:3px !important; border-style:solid; border-color: black; background-color: #eeedf0;">
                <div class="row">
                    <div class="m-4" *ngFor="let test of tests" >
                        <!-- <ng-container *ngIf="test.test.status == 'NOT YET STARTED'"> -->
                            <mat-card style="width: 350px; height: 200px;" *ngIf="test.test.status == 'NOT YET STARTED'">
                                <div>
                                    <div class="row">
                                        <div class="col">
                                            <h6 class="text-center">{{ test.test.title | uppercase }}</h6>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row mt-3">
                                        <div class="col-md-6">
                                            <p class="text-center">DURATIONS:</p>
                                        </div>
                                        <div class="col-md-6">
                                            <p>{{ test.test.durations }}mins</p>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <p class="text-center">Questions:</p>
                                        </div>
                                        <div class="col-md-6">
                                            <p>{{ test.test.questionID.length }}</p>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <button mat-button color="primary" style="width: 100%;" (click)="openDashboard(dashboard, test._id)">View Dashboard</button>
                                        </div>
                                    </div>
                                </div>
                            </mat-card>
                            
                        <!-- </ng-container> -->
                    </div>
                </div>
            </div>
        </mat-card>


        <mat-card class="mt-5 mat-elevation-z3">

            <div class="row">
                <div class="col-md-6">
                    <p>ONLINE TESTS</p>
                </div>
            </div>

            <div class="border rounded" style="border-width:3px !important; border-style:solid; border-color: black; background-color: #eeedf0;">
                <div class="row">
                    <div class="m-4" *ngFor="let test of tests" >
                        <!-- <ng-container *ngIf="test.test.status == 'NOT YET STARTED'"> -->
                            <mat-card style="width: 350px; height: 200px;" *ngIf="test.test.status == 'On Process'">
                                <div>
                                    <div class="row">
                                        <div class="col">
                                            <h6 class="text-center">{{ test.test.title | uppercase }}</h6>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row mt-3">
                                        <div class="col-md-6">
                                            <p class="text-center">DURATIONS:</p>
                                        </div>
                                        <div class="col-md-6">
                                            <p>{{ test.test.durations }}mins</p>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <p class="text-center">Questions:</p>
                                        </div>
                                        <div class="col-md-6">
                                            <p>{{ test.test.questionID.length }}</p>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <button mat-button color="primary" style="width: 100%;" (click)="openDashboard(dashboard, test._id)">View Dashboard</button>
                                        </div>
                                    </div>
                                </div>
                            </mat-card>
                            
                        <!-- </ng-container> -->
                    </div>
                </div>
            </div>
        </mat-card>


        <div class="mat-elevation-z8 mt-5">
            <div class="row">
                <div class="col-md-12">
                    <mat-icon class="p-3">search</mat-icon>
                    <mat-form-field class="m-2"  style="width: 40%;">
                        <input (keyup)="applyFilter($event.target.value)" matInput placeholder="Search Students"/>
                    </mat-form-field>
                </div>
            </div>

            <mat-table [dataSource]="students" matSort>
                <ng-container matColumnDef="First Name">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>First Name</mat-header-cell>
                    <mat-cell *matCellDef="let element">{{ element.firstName }}</mat-cell>
                </ng-container>
        
                <ng-container matColumnDef="Last Name">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>Last Name</mat-header-cell>
                    <mat-cell *matCellDef="let element">{{ element.lastName }}</mat-cell>
                </ng-container>
        
                <ng-container matColumnDef="Email">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>Email</mat-header-cell>
                    <mat-cell *matCellDef="let element">{{ element.mailId }}</mat-cell>
                </ng-container>
        
                <ng-container matColumnDef="CollegeTest">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>College Test</mat-header-cell>
                    <mat-cell *matCellDef="let element">{{ element.collegeTest?.length }}</mat-cell>
                </ng-container>
        
                <ng-container matColumnDef="actions">
                    <mat-header-cell *matHeaderCellDef></mat-header-cell>
                    <mat-cell *matCellDef="let element">
                        <button mat-icon-button class="cursorPointer b" (click)="viewProfile(element._id)"><mat-icon>launch</mat-icon></button>
                        <!-- <button mat-icon-button color="warn" class="cursorPointer b" (click)="deleteStudent(element._id)"><mat-icon>delete_outline</mat-icon></button> -->
                    </mat-cell>
                </ng-container>
        
                <ng-container matColumnDef="loading">
                    <mat-footer-cell *matFooterCellDef colspan="6">
                        Loading data...
                    </mat-footer-cell>
                </ng-container>
        
                <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
                <mat-footer-row *matFooterRowDef="['loading']" [ngClass]="{'hide': students!=null}"></mat-footer-row>
            </mat-table>

            <mat-paginator [pageSizeOptions]="[1, 2, 10]" showFirstLastButtons></mat-paginator>

        </div>
</div>


<ng-template #dashboard>
    <div>
        <div class="row">
            <div class="col">
                <h4 class="text-center">{{ currentTest.test.title | uppercase }}</h4>
            </div>
        </div>
        <hr>
        <div class="row m-3">
            <div class="col">
                <div class="border rounded" style="border-width:3px !important; border-style:solid; border-color: black;">
                    <div class="row m-4">
                        <div class="col-md-3 border-right" style="border-width:3px !important">
                            <h2 class="text-center">{{ currentTest.test.durations }} mins</h2>
                            <h6 class="text-center">DURATIONS</h6>
                        </div>
                        <div class="col-md-3 border-right" style="border-width:3px !important">
                            <div *ngIf="currentTest.test.startDate.length > 0">
                                <h4 class="text-center">{{ currentTest.test.startDate  |  date:'medium' }}</h4>
                                <h6 class="text-center">START DATE</h6>
                            </div>
                            <div *ngIf="currentTest.test.startDate.length <= 0">
                                <p class="text-center">NOT SET</p>
                                <h6 class="text-center">START DATE</h6>
                            </div>
                            <!-- <h2 class="text-center">{{ currentTest.test.startDate }}</h2>
                            <h6 class="text-center">START DATE</h6> -->
                        </div>
                        <div class="col-md-3 border-right" style="border-width:3px !important">
                            <div *ngIf="currentTest.test.endDate.length > 0">
                                <h4 class="text-center">{{ currentTest.test.endDate |  date:'medium'}}</h4>
                                <h6 class="text-center">END DATE</h6>
                            </div>
                            <div *ngIf="currentTest.test.endDate.length <= 0">
                                <p class="text-center">NOT SET</p>
                                <h6 class="text-center">END DATE</h6>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <h2 class="text-center">{{ currentTest.test.questionID.length + currentTest.test.collegeQuestionID.length }}</h2>
                            <h6 class="text-center">QUESTIONS</h6>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col m-2">
                <mat-expansion-panel *ngFor="let question of currentTest.test.questionID; let i = index" class="p-2 m-3">
                    <mat-expansion-panel-header>
                        Questions {{ i + 1 }}
                    </mat-expansion-panel-header>
                    <h6>{{ i + 1}} ) {{ question.questionsId.title | uppercase }}</h6>
            
                    <div class="row">
                        <div class="col">
                            <p>A ) {{ question.questionsId.optA }}</p>
                        </div>
            
                        <div class="col">
                            <p>B ) {{ question.questionsId.optB }}</p>
                        </div>
                    </div>
            
                    <div class="row">
                        <div class="col">
                            <p>C ) {{ question.questionsId.optC }}</p>
                        </div>
            
                        <div class="col">
                            <p>D ) {{ question.questionsId.optD }}</p>
                        </div>
                    </div>
            
                    <div class="row">
                        <div class="col">
                            <h5>Correct Answer : {{ question.questionsId.ans }}</h5>
                        </div>
                    </div>
            
                 </mat-expansion-panel>

                 <div *ngIf="currentTest.test.collegeQuestionID.length > 0">
                    <h6 class="text-center m-4">Questions From College</h6>
                 </div>

                 <mat-expansion-panel *ngFor="let question of currentTest.test.collegeQuestionID; let i = index" class="p-2 m-3">
                    <mat-expansion-panel-header>
                        Questions {{ currentTest.test.questionID.length + i + 1 }}
                    </mat-expansion-panel-header>
                    <h6>{{ currentTest.test.questionID.length + i + 1}} ) {{ question.questionsId.title | uppercase }}</h6>
            
                    <div class="row">
                        <div class="col">
                            <p>A ) {{ question.questionsId.optA }}</p>
                        </div>
            
                        <div class="col">
                            <p>B ) {{ question.questionsId.optB }}</p>
                        </div>
                    </div>
            
                    <div class="row">
                        <div class="col">
                            <p>C ) {{ question.questionsId.optC }}</p>
                        </div>
            
                        <div class="col">
                            <p>D ) {{ question.questionsId.optD }}</p>
                        </div>
                    </div>
            
                    <div class="row">
                        <div class="col">
                            <h5>Correct Answer : {{ question.questionsId.ans }}</h5>
                        </div>
                    </div>
            
                 </mat-expansion-panel>


            </div>
        </div>
    </div>
</ng-template>